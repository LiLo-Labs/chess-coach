{
  "id": "grunfeld",
  "name": "Grunfeld Defense",
  "description": "A dynamic defense where Black allows White a big center then attacks it with pieces. Leads to sharp, exciting play that rewards bold thinking.",
  "color": "black",
  "difficulty": 3,
  "tree": {
    "id": "grunfeld/root",
    "children": [
      {
        "id": "grunfeld/d2d4",
        "move": {
          "uci": "d2d4",
          "san": "d4",
          "explanation": "White claims the center with the queen's pawn. This is one of the most popular first moves in chess!"
        },
        "isMainLine": true,
        "weight": 300,
        "children": [
          {
            "id": "grunfeld/d2d4/g8f6",
            "move": {
              "uci": "g8f6",
              "san": "Nf6",
              "explanation": "Your knight jumps out to f6, attacking White's center and developing a piece at the same time. A great start!"
            },
            "isMainLine": true,
            "weight": 280,
            "children": [
              {
                "id": "grunfeld/d2d4/g8f6/c2c4",
                "move": {
                  "uci": "c2c4",
                  "san": "c4",
                  "explanation": "White expands further, building an impressive pawn center. Don't be scared — this is exactly what we want them to do!"
                },
                "isMainLine": true,
                "weight": 260,
                "children": [
                  {
                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6",
                    "move": {
                      "uci": "g7g6",
                      "san": "g6",
                      "explanation": "You prepare to fianchetto your bishop on g7, where it will become a powerful weapon aimed at White's center."
                    },
                    "isMainLine": true,
                    "weight": 240,
                    "children": [
                      {
                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3",
                        "move": {
                          "uci": "b1c3",
                          "san": "Nc3",
                          "explanation": "White develops the knight to c3, supporting the d4 pawn and building an even bigger center."
                        },
                        "isMainLine": true,
                        "weight": 220,
                        "children": [
                          {
                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5",
                            "move": {
                              "uci": "d7d5",
                              "san": "d5",
                              "explanation": "The Grünfeld move! You challenge White's big center directly with your own pawn. This is the whole point of the opening — attack the center with pieces and pawns!"
                            },
                            "isMainLine": true,
                            "weight": 200,
                            "children": [
                              {
                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5",
                                "move": {
                                  "uci": "c4d5",
                                  "san": "cxd5",
                                  "explanation": "White captures your d5 pawn, accepting the challenge. Now the center battle begins in earnest!"
                                },
                                "isMainLine": true,
                                "weight": 180,
                                "children": [
                                  {
                                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5",
                                    "move": {
                                      "uci": "f6d5",
                                      "san": "Nxd5",
                                      "explanation": "Recapture with the knight! Your knight lands on a great central square and invites White to build an even bigger center — which you'll then destroy."
                                    },
                                    "isMainLine": true,
                                    "weight": 160,
                                    "children": [
                                      {
                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4",
                                        "move": {
                                          "uci": "e2e4",
                                          "san": "e4",
                                          "explanation": "White grabs even more center space. White now has pawns on d4 and e4 — a huge center. But your bishop on g7 is about to make those pawns very uncomfortable!"
                                        },
                                        "isMainLine": true,
                                        "weight": 140,
                                        "children": [
                                          {
                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3",
                                            "move": {
                                              "uci": "d5c3",
                                              "san": "Nxc3",
                                              "explanation": "Your knight takes the c3 knight, giving White doubled pawns! You're trading your knight for the pawn structure advantage."
                                            },
                                            "isMainLine": true,
                                            "weight": 120,
                                            "children": [
                                              {
                                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3",
                                                "move": {
                                                  "uci": "b2c3",
                                                  "san": "bxc3",
                                                  "explanation": "White recaptures with the b-pawn, creating a doubled c-pawn. White has a big center but weakened pawn structure — your g7 bishop will target those pawns!"
                                                },
                                                "isMainLine": true,
                                                "weight": 100,
                                                "children": [
                                                  {
                                                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7",
                                                    "move": {
                                                      "uci": "f8g7",
                                                      "san": "Bg7",
                                                      "explanation": "The Grünfeld bishop comes to life on g7! It now fires straight down the long diagonal, targeting White's c3 and d4 pawns. This is your most important piece!"
                                                    },
                                                    "isMainLine": true,
                                                    "weight": 80,
                                                    "children": [
                                                      {
                                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7/g1f3",
                                                        "move": {
                                                          "uci": "g1f3",
                                                          "san": "Nf3",
                                                          "explanation": "White develops the knight to defend the center and prepare castling."
                                                        },
                                                        "isMainLine": true,
                                                        "weight": 60,
                                                        "children": [
                                                          {
                                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7/g1f3/c7c5",
                                                            "move": {
                                                              "uci": "c7c5",
                                                              "san": "c5",
                                                              "explanation": "Attack the center immediately! This pawn strike keeps the pressure on White's big center and opens lines for your pieces."
                                                            },
                                                            "isMainLine": true,
                                                            "weight": 50,
                                                            "children": []
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3",
                                        "move": {
                                          "uci": "g1f3",
                                          "san": "Nf3",
                                          "explanation": "White develops the knight before pushing e4. A more patient approach to building the center."
                                        },
                                        "isMainLine": false,
                                        "weight": 80,
                                        "children": [
                                          {
                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3/f8g7",
                                            "move": {
                                              "uci": "f8g7",
                                              "san": "Bg7",
                                              "explanation": "Develop your powerful Grünfeld bishop to g7 right away, pointing at the center."
                                            },
                                            "isMainLine": false,
                                            "weight": 65,
                                            "children": [
                                              {
                                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3/f8g7/e2e4",
                                                "move": {
                                                  "uci": "e2e4",
                                                  "san": "e4",
                                                  "explanation": "White finally pushes e4, completing the big center. The game transposes to the Classical Exchange Variation."
                                                },
                                                "isMainLine": false,
                                                "weight": 50,
                                                "children": [
                                                  {
                                                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3/f8g7/e2e4/d5c3",
                                                    "move": {
                                                      "uci": "d5c3",
                                                      "san": "Nxc3",
                                                      "explanation": "Trade the knight, give White doubled pawns, and activate your bishop. The standard Grünfeld recipe!"
                                                    },
                                                    "isMainLine": false,
                                                    "weight": 35,
                                                    "children": [
                                                      {
                                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3/f8g7/e2e4/d5c3/b2c3",
                                                        "move": {
                                                          "uci": "b2c3",
                                                          "san": "bxc3",
                                                          "explanation": "White must recapture. Now your g7 bishop has its sights on those weak c-pawns!"
                                                        },
                                                        "isMainLine": false,
                                                        "weight": 30,
                                                        "children": [
                                                          {
                                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/g1f3/f8g7/e2e4/d5c3/b2c3/c7c5",
                                                            "move": {
                                                              "uci": "c7c5",
                                                              "san": "c5",
                                                              "explanation": "Strike at the center with c5! Keep pressuring those pawns before White can consolidate."
                                                            },
                                                            "isMainLine": false,
                                                            "weight": 30,
                                                            "children": []
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ],
                                        "variationName": "Russian System"
                                      },
                                      {
                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4",
                                        "move": {
                                          "uci": "e2e4",
                                          "san": "e4",
                                          "explanation": "White immediately grabs the center with e4, the most ambitious reply. This leads to the sharpest Grünfeld positions."
                                        },
                                        "isMainLine": false,
                                        "weight": 80,
                                        "children": [
                                          {
                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3",
                                            "move": {
                                              "uci": "d5c3",
                                              "san": "Nxc3",
                                              "explanation": "Capture the knight and give White doubled pawns — the key Grünfeld idea. You trade material for structural damage!"
                                            },
                                            "isMainLine": false,
                                            "weight": 65,
                                            "children": [
                                              {
                                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3",
                                                "move": {
                                                  "uci": "b2c3",
                                                  "san": "bxc3",
                                                  "explanation": "White recaptures, now owning a huge center but with doubled c-pawns. Your bishop on g7 will attack them relentlessly."
                                                },
                                                "isMainLine": false,
                                                "weight": 50,
                                                "children": [
                                                  {
                                                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7",
                                                    "move": {
                                                      "uci": "f8g7",
                                                      "san": "Bg7",
                                                      "explanation": "Place your bishop on g7 — the perfect square to aim at White's c3 pawn and the entire long diagonal."
                                                    },
                                                    "isMainLine": false,
                                                    "weight": 35,
                                                    "children": [
                                                      {
                                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7/f1c4",
                                                        "move": {
                                                          "uci": "f1c4",
                                                          "san": "Bc4",
                                                          "explanation": "White develops the bishop aggressively to c4, targeting the f7 square. You need to keep your king safe!"
                                                        },
                                                        "isMainLine": false,
                                                        "weight": 30,
                                                        "children": [
                                                          {
                                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/c4d5/f6d5/e2e4/d5c3/b2c3/f8g7/f1c4/c7c5",
                                                            "move": {
                                                              "uci": "c7c5",
                                                              "san": "c5",
                                                              "explanation": "Strike at d4! Don't let White consolidate — keep attacking the center and your position will be fine."
                                                            },
                                                            "isMainLine": false,
                                                            "weight": 30,
                                                            "children": []
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ],
                                        "variationName": "Grunfeld: Bc4 line"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5",
                            "move": {
                              "uci": "d7d5",
                              "san": "d5",
                              "explanation": "Play d5 immediately! This is the core Grünfeld challenge — strike at White's center right away."
                            },
                            "isMainLine": false,
                            "weight": 125,
                            "children": [
                              {
                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/g2g3",
                                "move": {
                                  "uci": "g2g3",
                                  "san": "g3",
                                  "explanation": "White chooses the Fianchetto Variation — playing quietly with a bishop on g2 instead of grabbing the center immediately."
                                },
                                "isMainLine": false,
                                "weight": 110,
                                "children": [
                                  {
                                    "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/g2g3/d5c4",
                                    "move": {
                                      "uci": "d5c4",
                                      "san": "dxc4",
                                      "explanation": "Capture the c4 pawn! White will regain it, but this lets you develop freely and keep the position active."
                                    },
                                    "isMainLine": false,
                                    "weight": 95,
                                    "children": [
                                      {
                                        "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/g2g3/d5c4/g1f3",
                                        "move": {
                                          "uci": "g1f3",
                                          "san": "Nf3",
                                          "explanation": "White develops and prepares to reclaim the pawn. Stay cool and complete your own development."
                                        },
                                        "isMainLine": false,
                                        "weight": 80,
                                        "children": [
                                          {
                                            "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/g2g3/d5c4/g1f3/f8g7",
                                            "move": {
                                              "uci": "f8g7",
                                              "san": "Bg7",
                                              "explanation": "Fianchetto your bishop to g7 — matching White's g3-Bg2 setup with your own powerful diagonal piece."
                                            },
                                            "isMainLine": false,
                                            "weight": 65,
                                            "children": [
                                              {
                                                "id": "grunfeld/d2d4/g8f6/c2c4/g7g6/b1c3/d7d5/g2g3/d5c4/g1f3/f8g7/f1g2",
                                                "move": {
                                                  "uci": "f1g2",
                                                  "san": "Bg2",
                                                  "explanation": "White places the bishop on g2, creating a strong diagonal. You have a solid position — focus on completing development and castling."
                                                },
                                                "isMainLine": false,
                                                "weight": 50,
                                                "children": []
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "variationName": "Grunfeld: Fianchetto variation"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "isMainLine": true,
    "weight": 0
  },
  "plan": {
    "summary": "Let White build a giant pawn center on d4 and e4, then systematically destroy it with your fianchettoed bishop on g7, the pawn strike ...c5, and active piece play. You trade your center pawns for a lead in piece activity and attack White's weaknesses.",
    "strategicGoals": [
      { "description": "Fianchetto the bishop to g7 to control the long diagonal and target White's center", "priority": 1 },
      { "description": "Strike White's center with ...c5 (and possibly ...Qa5 or ...cxd4) to undermine d4", "priority": 2 },
      { "description": "Give White doubled c-pawns by trading knight on c3 — structural damage in exchange for tempo", "priority": 3 },
      { "description": "Castle kingside quickly to keep your king safe during the counterattack", "priority": 4 },
      { "description": "Use the open d-file and active rooks to pressure White's isolated or doubled pawns", "priority": 5 }
    ],
    "pawnStructureTarget": "Black gets a queenside majority (c5, b7) vs White's doubled c-pawns. The endgame favors Black's mobile pawns.",
    "keySquares": ["g7", "d4", "c3", "d5", "e4"],
    "pieceTargets": [
      { "piece": "dark-squared bishop", "idealSquares": ["g7"], "reasoning": "The Grünfeld bishop on g7 is the engine of Black's entire strategy — it pressures d4, c3, and the entire long diagonal" },
      { "piece": "queen", "idealSquares": ["a5", "b6", "d6"], "reasoning": "The queen supports the ...c5 break and can target White's weak c-pawns after the exchange" },
      { "piece": "king's knight", "idealSquares": ["f6", "d5"], "reasoning": "The knight challenges the center directly and participates in the Nxc3 exchange that gives White doubled pawns" },
      { "piece": "rooks", "idealSquares": ["d8", "c8"], "reasoning": "Rooks belong on open and half-open files created by ...c5 and ...cxd4" }
    ],
    "typicalPlans": [
      "Play ...c5 early to attack the d4 pawn and open the center",
      "Use ...Qa5 to pressure c3 and coordinate with the g7 bishop",
      "Trade on c3 to give White doubled pawns, then target them with ...Bg7 and ...c5",
      "In the endgame, use your queenside pawn majority to create a passed pawn"
    ],
    "commonMistakes": [
      "Developing the bishop before playing ...d5 — the bishop belongs on g7, but wait until the center is set up",
      "Playing passively after giving White doubled pawns — you must attack or White will consolidate",
      "Forgetting to castle before launching counterplay — your king must be safe first",
      "Exchanging the g7 bishop too early — it is your most valuable attacking piece in this opening"
    ],
    "historicalNote": "Named after Ernst Grünfeld who played it against Alekhine in 1922, this defense became famous when Bobby Fischer used it to beat the world's best players in the 1970s. Garry Kasparov, arguably the greatest player ever, relied on the Grünfeld throughout his career.",
    "planLessons": [
      {
        "title": "The Big Center — Don't Fear It!",
        "description": "After 1.d4 Nf6 2.c4 g6 3.Nc3, White has a strong center. Your plan is to challenge it with 3...d5 — the Grünfeld move! You're not afraid of White's pawns; you're going to attack them.",
        "fen": "rnbqkb1r/ppp1pp1p/5np1/3p4/2PP4/2N5/PP2PPPP/R1BQKBNR w KQkq d6 0 4",
        "highlights": ["d5", "d4", "c4"],
        "arrows": [{"from": "d7", "to": "d5"}],
        "style": "good"
      },
      {
        "title": "The Grünfeld Bishop: Your Best Piece",
        "description": "After trading on c3 and placing your bishop on g7, it fires down the long diagonal at White's pawns on d4 and c3. This bishop is the engine of everything you do in the Grünfeld.",
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/3PP3/2P2N2/PP3PPP/R1BQKB1R b KQkq - 0 7",
        "highlights": ["g7", "d4", "c3"],
        "arrows": [{"from": "g7", "to": "d4"}, {"from": "g7", "to": "c3"}],
        "style": "good"
      },
      {
        "title": "Attack the Center with ...c5!",
        "description": "Your key pawn break is ...c5! This strikes at White's d4 pawn, opens the c-file for your rook, and keeps the pressure on. Don't let White sit comfortably with that big center.",
        "fen": "r1bqk2r/pp2ppbp/6p1/2p5/3PP3/2P2N2/PP3PPP/R1BQK2R b KQkq - 0 8",
        "highlights": ["c5", "d4"],
        "arrows": [{"from": "c7", "to": "c5"}],
        "style": "good"
      },
      {
        "title": "Don't Be Passive — Keep Attacking!",
        "description": "After giving White doubled c-pawns, some beginners play quietly and let White consolidate. That's wrong! You must keep the pressure going with ...c5, ...Qa5, and active pieces.",
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/3PP3/2P2N2/PP3PPP/R1BQKB1R b KQkq - 0 7",
        "highlights": ["c3", "d4"],
        "arrows": [],
        "style": "bad"
      },
      {
        "title": "Castle First, Then Counterattack",
        "description": "Before launching your attack, make sure your king is safe by castling kingside. Once your king is tucked away on g8, you can play aggressively without worrying about back-rank tricks.",
        "fen": "r1bq1rk1/ppp1ppbp/6p1/2p5/3PP3/2P2N2/PP3PPP/R1BQ1RK1 w - - 2 9",
        "highlights": ["g8", "g1"],
        "arrows": [],
        "style": "good"
      }
    ],
    "planQuizzes": [
      {
        "fen": "rnbqkb1r/ppp1pp1p/5np1/3p4/2PP4/2N5/PP2PPPP/R1BQKBNR w KQkq d6 0 4",
        "prompt": "Black just played 3...d5, the Grünfeld move. What is the main idea?",
        "choices": [
          {"text": "Directly challenge White's big center and plan to destroy it with pieces", "isCorrect": true},
          {"text": "Trade queens and go into an endgame immediately", "isCorrect": false},
          {"text": "Protect the f6 knight from being attacked", "isCorrect": false}
        ],
        "correctIndex": 0,
        "explanation": "The Grünfeld is all about challenging White's big center directly. You let White build it, then attack it with ...Bg7, ...c5, and active piece play. The center becomes a target, not a strength!",
        "boardHighlightsOnReveal": ["d5", "d4", "c4"],
        "arrowsOnReveal": [{"from": "d7", "to": "d5"}]
      },
      {
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/3PP3/2P2N2/PP3PPP/R1BQKB1R b KQkq - 0 7",
        "prompt": "You have your bishop on g7. White has a big center on d4/e4 and doubled c-pawns. What is your best pawn move?",
        "choices": [
          {"text": "...c5 — attack the d4 pawn and open lines for your pieces", "isCorrect": true},
          {"text": "...a6 — prepare queenside expansion slowly", "isCorrect": false},
          {"text": "...h6 — prevent any bishop coming to g5", "isCorrect": false}
        ],
        "correctIndex": 0,
        "explanation": "...c5 is the Grünfeld's main counterattack! It hits the d4 pawn directly, opens the c-file for your rook, and keeps the pressure on White's center. Your bishop on g7 loves the open diagonal that results.",
        "boardHighlightsOnReveal": ["c5", "d4", "g7"],
        "arrowsOnReveal": [{"from": "c7", "to": "c5"}, {"from": "g7", "to": "d4"}]
      },
      {
        "fen": "r1bqk2r/ppp1ppbp/6p1/2p5/3PP3/2P2N2/PP3PPP/R1BQK2R w KQkq c6 0 8",
        "prompt": "It's time to castle. Where should your king go?",
        "choices": [
          {"text": "Castle kingside (O-O) — your king will be safe behind the g6 pawn and fianchettoed bishop", "isCorrect": true},
          {"text": "Castle queenside (O-O-O) — put your king on the open queenside where the action is", "isCorrect": false},
          {"text": "Keep the king in the center — it's faster to develop rooks that way", "isCorrect": false}
        ],
        "correctIndex": 0,
        "explanation": "Castling kingside puts your king safely behind the g6 pawn and your Grünfeld bishop. The queenside is where the pawn battles will happen — your king doesn't want to be there! Always castle kingside in the Grünfeld.",
        "boardHighlightsOnReveal": ["g8", "g7", "g6"],
        "arrowsOnReveal": [{"from": "e8", "to": "g8"}]
      }
    ],
    "theoryLessons": [
      {
        "title": "Classical Exchange Variation (D85)",
        "description": "After 1.d4 Nf6 2.c4 g6 3.Nc3 d5 4.cxd5 Nxd5 5.e4 Nxc3 6.bxc3 Bg7, we reach the main Grünfeld position. White has a huge center; Black has the powerful g7 bishop and will play ...c5 to attack it. This is the most important position to know!",
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/3PP3/2P2N2/PP3PPP/R1BQKB1R b KQkq - 0 7",
        "highlights": ["g7", "d4", "e4", "c3"],
        "arrows": [{"from": "g7", "to": "d4"}, {"from": "c7", "to": "c5"}],
        "style": "theory"
      },
      {
        "title": "Russian System (D97)",
        "description": "If White plays 5.Nf3 instead of 5.e4, this is the Russian System. White delays grabbing the center and develops first. Black still responds with ...Bg7 and ...0-0, then plays ...c5 to challenge the center when ready.",
        "fen": "rnbqkb1r/ppp1pp1p/6p1/3n4/2PP4/2N2N2/PP2PPPP/R1BQKB1R b KQkq - 2 5",
        "highlights": ["d5", "f3", "d4"],
        "arrows": [{"from": "f8", "to": "g7"}, {"from": "e8", "to": "g8"}],
        "style": "theory"
      },
      {
        "title": "Fianchetto Variation (D72)",
        "description": "When White plays 4.g3 instead of 4.Nc3, it's the Fianchetto Variation. White builds up slowly with Bg2. Black can capture on c4 (dxc4) and develop freely. The game is less sharp than the Classical lines.",
        "fen": "rnbqkb1r/ppp1pp1p/5np1/3p4/2PP4/2N3P1/PP2PP1P/R1BQKBNR b KQkq - 0 4",
        "highlights": ["g3", "d5"],
        "arrows": [{"from": "f1", "to": "g2"}],
        "style": "theory"
      },
      {
        "title": "The Bc4 Line (D87)",
        "description": "After 7.Bc4 (instead of 7.Nf3), White threatens the f7 pawn! But don't panic — Black plays ...c5 immediately to keep the pressure on. Your bishop on g7 counterbalances White's active Bc4.",
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/2BPP3/2P5/PP3PPP/R1BQK1NR b KQkq - 0 7",
        "highlights": ["c4", "f7", "g7"],
        "arrows": [{"from": "c4", "to": "f7"}, {"from": "g7", "to": "d4"}],
        "style": "theory"
      }
    ],
    "theoryQuizzes": [
      {
        "fen": "rnbqkb1r/ppp1pp1p/5np1/3p4/2PP4/2N5/PP2PPPP/R1BQKBNR w KQkq d6 0 4",
        "prompt": "After 1.d4 Nf6 2.c4 g6 3.Nc3 d5, what is this defense called?",
        "choices": [
          {"text": "Grünfeld Defense", "isCorrect": true},
          {"text": "King's Indian Defense", "isCorrect": false},
          {"text": "Nimzo-Indian Defense", "isCorrect": false},
          {"text": "Modern Defense", "isCorrect": false}
        ],
        "correctIndex": 0,
        "explanation": "This is the Grünfeld Defense! The defining move is 3...d5, immediately challenging White's center. It's named after Ernst Grünfeld who played it in 1922 and was later made famous by Bobby Fischer and Garry Kasparov.",
        "boardHighlightsOnReveal": ["d5", "d4", "c4"],
        "arrowsOnReveal": []
      },
      {
        "fen": "rnbqk2r/ppp1ppbp/6p1/8/3PP3/2P2N2/PP3PPP/R1BQKB1R b KQkq - 0 7",
        "prompt": "After 6.bxc3 Bg7, what is the main line called and what should Black play next?",
        "choices": [
          {"text": "Classical Exchange Variation — Black plays ...c5 to attack the center", "isCorrect": true},
          {"text": "Russian System — Black plays ...Nf6 to redevelop the knight", "isCorrect": false},
          {"text": "Fianchetto Variation — Black plays ...d6 to support the center", "isCorrect": false}
        ],
        "correctIndex": 0,
        "explanation": "This is the Classical Exchange Variation (D85). After giving White doubled c-pawns and placing the bishop on g7, Black's next move should be ...c5 to attack the d4 pawn. This is the main counterattacking idea in the Grünfeld!",
        "boardHighlightsOnReveal": ["c3", "d4", "g7"],
        "arrowsOnReveal": [{"from": "c7", "to": "c5"}]
      }
    ]
  },
  "opponentResponses": {
    "afterMoves": ["d2d4", "g8f6", "c2c4", "g7g6", "b1c3", "d7d5"],
    "responses": [
      {
        "id": "grunfeld-exchange",
        "move": { "uci": "c4d5", "san": "cxd5", "explanation": "White captures your d5 pawn, leading to the Classical Exchange Variation — the sharpest and most popular line." },
        "name": "Classical Exchange Variation",
        "eco": "D85",
        "frequency": 0.50,
        "description": "White accepts the challenge and captures on d5, aiming to build a massive center with e4. This is the most ambitious and popular response.",
        "planAdjustment": "Recapture with Nxd5, then after e4 Nxc3 bxc3, fianchetto your bishop to g7 and play ...c5 to attack the center. This is your main line — trust the plan and keep the pressure on!"
      },
      {
        "id": "grunfeld-fianchetto",
        "move": { "uci": "g2g3", "san": "g3", "explanation": "White plays the Fianchetto Variation, building up quietly instead of immediately grabbing the center." },
        "name": "Fianchetto Variation",
        "eco": "D72",
        "frequency": 0.25,
        "description": "White mirrors your fianchetto plan. The game is less sharp than the Exchange lines — both sides build up quietly.",
        "planAdjustment": "You can capture on c4 (dxc4) and develop freely, or transpose to standard Grünfeld structures. Focus on ...Bg7, ...O-O, and ...c5. The game will be more positional."
      },
      {
        "id": "grunfeld-russian",
        "move": { "uci": "g1f3", "san": "Nf3", "explanation": "White develops the knight before pushing e4 — the Russian System. A solid, patient approach." },
        "name": "Russian System",
        "eco": "D97",
        "frequency": 0.15,
        "description": "White delays grabbing the center and develops first. This leads to slightly calmer positions than the Exchange Variation.",
        "planAdjustment": "Develop your bishop to g7, castle kingside, and play ...c5 when ready. The standard Grünfeld counterplay still works — just at a slightly slower pace."
      },
      {
        "id": "grunfeld-averbakh",
        "move": { "uci": "e2e4", "san": "e4", "explanation": "White immediately grabs the center with e4 before developing the knight — the Averbakh/Budapest variation." },
        "name": "Averbakh Variation",
        "eco": "D80",
        "frequency": 0.10,
        "description": "White grabs the center immediately with e4. This is an unusual move order that can catch beginners off guard.",
        "planAdjustment": "Continue with ...dxc4 to grab the pawn and develop freely, or play ...dxe4 to dissolve the center. Either way, complete your development with ...Bg7 and ...O-O."
      }
    ]
  }
}
